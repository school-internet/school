<!DOCTYPE html>
<html lang="en">
<@common.header/>
<link href="/cssplugins/switchery/switchery.css" rel="stylesheet">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body class="gray-bg">
<div class="wrapper wrapper-content animated fadeInRight">
    <div class="row">
        <div class="col-sm-12">
            <div class="ibox float-e-margins">
                <div class="ibox-title">
                    <h5>类型指令</h5>
                </div>
                <div class="ibox-content">
                    <div class="row">
                        <div class="col-sm-6">
                            <dl class="dl-horizontal">
                                <dt>端口1：</dt>
                                <dd>
                                <div class="switch">
                                    <div class="onoffswitch">
                                        <input type="checkbox" <#if reviceVO.port1=='0'>checked</#if>  class="onoffswitch-checkbox" id="port1">
                                        <label class="onoffswitch-label" for="port1">
                                            <span class="onoffswitch-inner"></span>
                                            <span class="onoffswitch-switch"></span>
                                        </label>
                                    </div>
                                </div>
                                </dd>
                                <dt>端口3：</dt>
                                <dd>
                                <div class="switch">
                                    <div class="onoffswitch">
                                        <input type="checkbox" <#if reviceVO.port3=='0'>checked</#if>  class="onoffswitch-checkbox" id="port3">
                                        <label class="onoffswitch-label" for="port3">
                                            <span class="onoffswitch-inner"></span>
                                            <span class="onoffswitch-switch"></span>
                                        </label>
                                     </div>
                                </div>
                                </dd>
                                <dt>端口5：</dt>
                                <dd>
                                <div class="switch">
                                    <div class="onoffswitch">
                                        <input type="checkbox" <#if reviceVO.port5=='0'>checked</#if>  class="onoffswitch-checkbox" id="port5">
                                    <label class="onoffswitch-label" for="port5">
                                        <span class="onoffswitch-inner"></span>
                                        <span class="onoffswitch-switch"></span>
                                    </label>
                                    </div>
                                </div>
                                </dd>
                                <dt>端口7：</dt>
                                <dd>
                                    <div class="switch">
                                        <div class="onoffswitch">
                                            <input type="checkbox" <#if reviceVO.port7=='0'>checked</#if>  class="onoffswitch-checkbox" id="port7">
                                        <label class="onoffswitch-label" for="port7">
                                            <span class="onoffswitch-inner"></span>
                                            <span class="onoffswitch-switch"></span>
                                        </label>
                                        </div>
                                    </div>
                                </dd>
                            </dl>
                        </div>
                        <div class="col-sm-6">
                            <dl class="dl-horizontal">
                                <dt>端口2：</dt>
                                <dd>
                                    <div class="switch">
                                        <div class="onoffswitch">
                                            <input type="checkbox" <#if reviceVO.port2=='0'>checked</#if>  class="onoffswitch-checkbox" id="port2">
                                        <label class="onoffswitch-label" for="port2">
                                            <span class="onoffswitch-inner"></span>
                                            <span class="onoffswitch-switch"></span>
                                        </label>
                                        </div>
                                    </div>
                                </dd>
                                <dt>端口4：</dt>
                                <dd>
                                    <div class="switch">
                                        <div class="onoffswitch">
                                            <input type="checkbox" <#if reviceVO.port4=='0'>checked</#if>  class="onoffswitch-checkbox" id="port4">
                                        <label class="onoffswitch-label" for="port4">
                                            <span class="onoffswitch-inner"></span>
                                            <span class="onoffswitch-switch"></span>
                                        </label>
                                    </div>
                                    </div>
                                </dd>
                                <dt>端口6：</dt>
                                <dd>
                                    <div class="switch">
                                        <div class="onoffswitch">
                                            <input type="checkbox" <#if reviceVO.port6=='0'>checked</#if>  class="onoffswitch-checkbox" id="port6">
                                        <label class="onoffswitch-label" for="port6">
                                            <span class="onoffswitch-inner"></span>
                                            <span class="onoffswitch-switch"></span>
                                        </label>
                                        </div>
                                    </div>
                                </dd>
                                <dt>端口8：</dt>
                                <dd>
                                    <div class="switch">
                                        <div class="onoffswitch">
                                            <input type="checkbox" <#if reviceVO.port8=='0'>checked</#if>  class="onoffswitch-checkbox" id="port8">
                                        <label class="onoffswitch-label" for="port8">
                                            <span class="onoffswitch-inner"></span>
                                            <span class="onoffswitch-switch"></span>
                                        </label>
                                        </div>
                                    </div>
                                </dd>
                            </dl>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-sm-6">
                            <dl class="dl-horizontal">
                                <button class="btn btn-primary" type="button" onclick="sendinstructs()" >提交</button>
                            </dl>
                        </div>
                    </div>

                </div>
            </div>

        </div>
    </div>
</div>
<@common.js/>
<!-- layer -->
<script src="/plugins/layer/layer.js"></script>
<script src="/plugins/switchery/switchery.js"></script>
<script>
    $(document).ready(function () {

    });
    function sendinstructs(){
        var clickCheckboxs = document.querySelectorAll('.onoffswitch-checkbox')
        var structs = [];
        for(var i = 0; i<clickCheckboxs.length; i++ ){
            var struct = clickCheckboxs[i].id+","+clickCheckboxs[i].checked;
            structs.push(struct)
        }
        sendinstruct(structs.join())

    }
    function sendinstruct(instructValue){
        swal({
            title: "您确定要发送吗",
            text: "发送该设备指令！",
            type: "info",
            showCancelButton: true,
            confirmButtonColor: "#DD6B55",
            confirmButtonText: "确定",
            closeOnConfirm: false
        }, function () {
            var index = null;
            $.ajax({
                type: "GET",
                url:"/equip/eq-equipdoc/sendjdq?pkEquipdoc=${pkEquipdoc}&structs="+instructValue,
                async: false,
                beforeSend: function () {

                },
                complete: function () {

                },
                error: function(request) {
                    alert("Connection error");
                },
                success: function(data) {
                    if(data == 0){
                        swal({title :"成功！", text :"您已经操作成功。", type :"success"},function(){

                        });
                    }

                }
            });
        });
    }

</script>
</body>
</html>